(function(a){a.fieldsaddmore=function(c,b){var d=this;var e=0;d.$el=a(c);d.el=c;d.$el.data("fieldsaddmore",d);d.init=function(){var f;d.options=a.extend({},a.fieldsaddmore.defaultOptions,b);d.options.callbackBeforeInit(d.$el,d.options);d.addClick();d.removeClick();if(a(d.options.rowEle).length>0){e=parseInt(a(d.options.rowEle).last().find(d.options.removebtn).data("rowid"))}else{e=0}if(d.options.min){for(f=1;f<=d.options.min;f++){d.content()}}};d.content=function(){d.options.callbackBeforeAdd(d.$el,d.options);e=e+1;var f=a(d.options.templateEle).html();f=f.replace(/key/g,e);f=f.replace("rowId","rowId-"+e);d.$el.append(f);d.options.callbackAfterAdd(d.$el,d.options)};d.addClick=function(){a("form").on("click",d.options.addbtn,function(){d.options.callbackBeforeAddClick(d.$el,d.options);d.content();a(this).blur();d.options.callbackAfterAddClick(d.$el,d.options);return false})};d.removeClick=function(){a("form").on("click",d.options.removebtn,function(){d.options.callbackBeforeRemoveClick(d.$el,d.options);if(d.$el.find(d.options.rowEle).length>d.options.min){d.$el.find(".rowId-"+a(this).data("rowid")).remove()}a(this).blur();d.options.callbackAfterRemoveClick(d.$el,d.options);return false})};d.init()};a.fieldsaddmore.defaultOptions={templateEle:"#fieldsaddmore-template",rowEle:".fieldsaddmore-row",addbtn:".fieldsaddmore-addbtn",removebtn:".fieldsaddmore-removebtn",min:1,callbackBeforeInit:function(c,b){},callbackBeforeAdd:function(c,b){},callbackAfterAdd:function(c,b){},callbackBeforeAddClick:function(c,b){},callbackAfterAddClick:function(c,b){},callbackBeforeRemoveClick:function(c,b){},callbackAfterRemoveClick:function(c,b){}};a.fn.fieldsaddmore=function(b){return this.each(function(){var c=new a.fieldsaddmore(this,b)})}})(jQuery);